<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> A simple and intuitive guide to using uv - an awesome tool from astral! | Om Kumar </title> <meta name="author" content="Om Kumar"> <meta name="description" content="Quick Dive into Byte Pair Encoding tokenizers."> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/assets/img/DinoTim.jpg?fb78e70fb7a3591c22a9d7e7902c88a1"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://w-ok-e.github.io/blog/2025/uv_tutorial/"> <script src="/assets/js/theme.js?a81d82887dd692e91686b43de4542f18"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Om</span> Kumar </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/books/">bookshelf </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">A simple and intuitive guide to using uv - an awesome tool from astral!</h1> <p class="post-meta"> Created on October 26, 2025 </p> <p class="post-tags"> <a href="/blog/2025"> <i class="fa-solid fa-calendar fa-sm"></i> 2025 </a>   ·   <a href="/blog/tag/computer"> <i class="fa-solid fa-hashtag fa-sm"></i> Computer</a>   <a href="/blog/tag/vision"> <i class="fa-solid fa-hashtag fa-sm"></i> Vision,</a>   <a href="/blog/tag/opencv"> <i class="fa-solid fa-hashtag fa-sm"></i> OpenCV</a>   ·   <a href="/blog/category/posts"> <i class="fa-solid fa-tag fa-sm"></i> Posts</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <h2 id="step-1---setting-up-uv">Step 1 - Setting up uv</h2> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>curl <span class="nt">-LsSf</span> https://astral.sh/uv/install.sh | sh
</code></pre></div></div> <h2 id="step-2---setting-up-a-simple-environment-in-uv-and-reproducing-it">Step 2 - Setting up a simple environment in uv and reproducing it</h2> <p>Clone the repo:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/W-OK-E/UWe.git
</code></pre></div></div> <p>This repo follows the following folder structure:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>UWe
|---UWe is the Parent project with some deps 
|
<span class="nt">----chimera</span>
|   |
|   <span class="nt">-----It</span> has non-conflicting deps with the parent folder
|---hunter
|   |
|   <span class="nt">-----It</span><span class="s1">'s dependencies are conflicting with the parent folder
|---sapphire
|   |
|   -----It'</span>s dependencies are conflicting with the parent folder but not folder chimera
</code></pre></div></div> <p>Each folder is designed to demonstrate the effectiveness of uv in isloating and manageing environments at lightning speed. But first we will start with a simple environment creation. Initialize a uv project in the root of the repo</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uv init

</code></pre></div></div> <p>The command basically creates a .lock file and a .toml file which track the dependencies of your project.</p> <p><strong>Install the dependencies</strong> There are two ways in which this can be done</p> <ol> <li>Safe way <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>uv add <span class="nt">-r</span> base_requirements.txt
</code></pre></div> </div> <p>This command installs the dependencies in a .venv folder in the same directory, while also adding it to the .toml and .lock files so that we can keep track of the installed packages.</p> </li> <li>Installation with no tracking <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>uv pip <span class="nb">install</span> <span class="nt">-r</span> base_requirements.txt
</code></pre></div> </div> <p>The above command will only install the package in the .venv folder without adding it to the .toml and .lock files.</p> </li> </ol> <p>Now it might not make much sense but let’s test what each of those methods mean for your projects:</p> <h2 id="the-safe-way">The Safe Way</h2> <p>Once you have installed base_requirements.txt via the Safe Way, go ahead and remove the .venv in the root of your project:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> .venv
</code></pre></div></div> <p>This removes all the installed packages. Now run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uv run tests.py
</code></pre></div></div> <p>tests.py just imports a few packages to test the environment. What uv does now is, before running the script it checks the .lock and .toml files for what packages should be present in the environment, and automatically installs them without you having to explicitly mention it. Magic!! Which means that if you have installed the dependencies via the first method and someone else where to clone the repo, they won’t need to follow a tedious environment setup, they can just proceeed to run the relevant files and the packages are automatically installed.</p> <h2 id="the-direct-way">The Direct way</h2> <p>First remove all the config files by running:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> .venv uv.lock pyproject.toml 
</code></pre></div></div> <p>Initialize the project</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uv init
</code></pre></div></div> <p>Now a crucial aspect of trying to run <code class="language-plaintext highlighter-rouge">uv pip install -r base_requirements.txt</code>, is that you need to initialize the project and create a .venv by running:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uv venv
</code></pre></div></div> <ul> <li>If you donot run <code class="language-plaintext highlighter-rouge">uv init</code> uv will start using any environment it finds which will be disastrous</li> <li>If you donot run <code class="language-plaintext highlighter-rouge">uv venv</code> uv won’t know where to pip install the requirements.</li> </ul> <p>Once that is done, install deps via:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uv pip <span class="nb">install</span> <span class="nt">-r</span> base_requirements.txt
</code></pre></div></div> <p>This time the packages won’t be tracked by .toml or .lock files so when you do:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> <span class="nt">-rf</span> .venv
</code></pre></div></div> <p>And run:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>uv run tests.py
</code></pre></div></div> <p>You will get an error saying package not found, because uv doesn’t know what deps it needs to install.</p> <p>That completes everything about setting up a basic uv environment</p> <h2 id="managing-sub-projects">Managing Sub-projects</h2> <p>Now let’s see the following cases:</p> <ol> <li>If you have sub-projects inside your project that have non-conflicting dependencies with the parent project.</li> <li>If you have sub-projects with conflicting deps with the parent project</li> <li>If you have a sub-project which has conflicitng deps with th parent project but can work with the deps of some other sub-project.</li> </ol> <h3 id="case-1">Case-1</h3> <p>So this is the easiest scenario, the sub-folder chimera has deps which donot conflict with that of the parent folder, so we can just do:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>chimera
uv init <span class="c">#Optional</span>
uv add <span class="nt">-r</span> requirements.txt
</code></pre></div></div> <p>The deps for chimera donot conflict with that of the parent project so the packages will get installed to the <code class="language-plaintext highlighter-rouge">../.venv</code> folder and the packages will get added to the <code class="language-plaintext highlighter-rouge">../uv.lock</code> and <code class="language-plaintext highlighter-rouge">../pyproject.toml</code></p> <h3 id="case-2">Case-2</h3> <p>The deps in the hunter folder are incompatible with that of the parent project so if you:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>hunter
uv add <span class="nt">-r</span> requirements.txt
</code></pre></div></div> <p>You will get the following error:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  × No solution found when resolving dependencies:
  ╰─▶ Because <span class="nv">requests</span><span class="o">==</span>2.28.2 depends on urllib3&gt;<span class="o">=</span>1.21.1,&lt;1.27 and your project depends on <span class="nv">requests</span><span class="o">==</span>2.28.2, we can conclude that your
      project depends on urllib3&gt;<span class="o">=</span>1.21.1,&lt;1.27.
      And because your project depends on <span class="nv">urllib3</span><span class="o">==</span>2.2.0, we can conclude that your project<span class="s1">'s requirements are unsatisfiable.
  help: If you want to add the package regardless of the failed resolution, provide the `--frozen` flag to skip locking and syncing.
</span></code></pre></div></div> <p>Now the following things are <strong>not recommended</strong>:</p> <ol> <li>Doing a frozen install as the error suggests, it will be very hard to reproduce the environment later</li> <li>Running <code class="language-plaintext highlighter-rouge">uv pip install -r requirements.txt</code> - This will install the package to ../.venv without any syncing or locking, and will remove the parent folder’s package version. And everytime depending upon where you run a script from the package will swing between two versions because it will keep looking at the .toml that has the parent folder’s deps. And if you run the a script in hunter that requires <code class="language-plaintext highlighter-rouge">urllib3==2.2.0</code>, it will give you an error.</li> </ol> <p><strong>Recommended</strong>:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">cd </span>hunter
uv init <span class="nt">--no-worskpace</span>
uv add <span class="nt">-r</span> requirements.txt
</code></pre></div></div> <p>This will start treating the <code class="language-plaintext highlighter-rouge">hunter/</code> folder as a separate project.**If you run <code class="language-plaintext highlighter-rouge">uv init</code> without the <code class="language-plaintext highlighter-rouge">--no-workspace</code>, it will start treating <code class="language-plaintext highlighter-rouge">hunter</code> as a member of the parent workspace and give the same errors as above. Things to take care in this setup:</p> <ol> <li>If you want to run some script in the <code class="language-plaintext highlighter-rouge">hunter/</code> folder you must run it from that folder because uv looks up the immediate environment setup. So it uses the closest interpreter is used. Which means int he folder structure: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>UWe
|
.venv
tests.py
<span class="nt">----chimera</span>
|   |
|   <span class="nt">-----It</span> has some dependencies
|   hunter
|   |
|   .venv
|    tests.py
</code></pre></div> </div> <p>If you run tests.py in the hunter folder from the parent folder it uses the packages in the parent folder’s .venv. So to use hunter’s venv you must:</p> <ul> <li>either run it from the hunter folder</li> <li>or activate the hunter virtual environment via: <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nb">source </span>hunter/.venv/bin/activate
</code></pre></div> </div> <p>And when running scripts, you will need to pass the <code class="language-plaintext highlighter-rouge">--active</code> flag:</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>uv run <span class="nt">--active</span> hunter/tests.py
</code></pre></div> </div> </li> </ul> </li> </ol> <h3 id="case-3">Case-3</h3> <p>The deps in the sapphire folder conflict with the parent folder but are compatible with the deps of hunter/ folder, so you can use hunter’s environment globally but you will need to pass the <code class="language-plaintext highlighter-rouge">active</code> flag everytime:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source </span>hunter/.venv/bin/activate
</code></pre></div></div> <p>Then whatever you run a script pass the <code class="language-plaintext highlighter-rouge">--active</code> flag as:</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">source </span>hunter/.venv/bin/activate
uv run <span class="nt">--active</span> sapphire/tests.py 
</code></pre></div></div> <hr> <p>This covers almost all of the intricate cases you might face while using uv, please note that while uv can completely replace pip, conda is still better in some cases, especially when your project has non-pythonic dependencies. For more details please head over to the documentation, it’s super cool - https://docs.astral.sh/uv/ <strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><strong>**</strong><em>**</em></p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/bpe_short/">A quick overview of Byte Pair Encoding tokenizers!</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/onurown/">Delegation, Discomfort and Decisions!</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/saycan/">Watch and Learn, forget the speech!</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/quarv/">Lights❌ Language✅ Camera...Action</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/quad/">Your dog can sniff, mine scans...</a> </li> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Om Kumar. Hosted with ❤️ by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/plotly.js@3.0.1/dist/plotly.min.js" integrity="sha256-oy6Be7Eh6eiQFs5M7oXuPxxm9qbJXEtTpfSI93dW16Q=" crossorigin="anonymous"></script> <script defer src="/assets/js/plotly-setup.js?5e81fc889064852664784cb29c0d6970" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?c8a01c11a92744d44b093fc3bda915df" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>